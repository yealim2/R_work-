library(tidyverse)
class(iris)
as_tibble(iris)
tibble(
  x=1:5, #???????????? 5???????????? ????????????
  y=1,
  z=x^2+y 
)
tibble(
  ':)' = "smile",
  ' ' = "space",
  '2000' = "number"
)
tribble(         # ????????? ?????? 
  ~x, ~y, ~z,
  "a", 2, 3.6,
  "b", 1, 8.5
)
iris
iris_tb<-as_tibble(iris)
iris_tb 

nycflights13::flights %>%
  print(n=10, width = Inf)

df <- tibble(
  x = runif(5),
  y = rnorm(5)
)
df$x
df[["x"]]
df[[1]]
df %>%
  .[["x"]]

# ????????? ???????????? ?????? ????????? ?????? test ????????? ???????????? ????????????

test <- tibble(
  a=1:10,
  b=a*2+rnorm(5)
)
##1. ?????? a ??? ???????????????
test[["a"]]
##2. ????????? 
ggplot(data=test)+
  geom_point(mapping=aes(x=a,y=b))
##3. ????????? ?????? c ????????? (???, c??? b??? a??? ?????? ??????)
test$c <- test$a/test$b
test
test$c <- c(2:11)
test
#readr ????????? ??????
getwd()
setwd("c:/R_work")
heights <- read_csv("heights.csv")

#?????????(race) ??????(earn) ????????????
by_race <- group_by(heights, race)
earn_by_race <- summarize(by_race, mean_earn = mean(earn))
earn_by_race

acs_or <- read_csv(url("http://stat511.cwick.co.nz/homeworks/acs_or.csv"))
acs_or
# ????????? ????????? ?????? ?????? ????????????
View(acs_or)

#????????? 2~4?????? ????????? ???????????????(???, ?????? 5????????? ?????? ?????? ???????????????
filter(acs_or, bedrooms %in% c(2:4)) %>%
  print(n = 5, width = Inf)

# ?????? ??????(income_husband)??? ?????? ?????? ????????? ???????????????(???, ??????????????????)
arrange(acs_or, desc(income_husband))

#?????? ??????(age_husband), ?????? ??????(income_husband) ?????? ??????
(age_wife), ?????? ??????(income_wife), ?????? ???(number_children) ??? ???
????????? ????????? ?????? family ??? ????????????
family <- select(acs_or, age_husband, income_husband, age_wife,
                 income_wife, number_children)
family

# ?????? ????????? ??????(mean_age), ?????? ????????? ??????(mean_income)??? ????????????
summarize(acs_or, mean_age = mean(age_husband),
          mean_income = mean(income_husband))

# ???????????? 2 ?????? ????????? ???????????? ?????? ????????? ?????? ????????????, ?????? ????????? ??????
?????? ????????? ?????? ????????? ???????????????

#write_csv( ) ?????? R?????? ?????? ????????? CSV ????????? ????????????
write_csv(family, "family.csv")

#working directory??? family.csv ???????????? ???????????? ?????? ????????? ?????? read_csv( ) ????????? 
read_csv("family.csv")

download.file("http://stat511.cwick.co.nz/homeworks/acs_or.csv", "acs_or.csv")

# ????????? ????????? ?????? ???????????? read_file( ) ??? ?????????????????? , read_line( ) ??? ????????????
yesterday <- read_file("yesterday.txt")
yesterday_line <- read_lines("yesterday.txt")
yesterday
